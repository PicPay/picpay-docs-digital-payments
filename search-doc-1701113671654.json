[{"title":"Aceitando pagamentos com a API pública#","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments","content":"","keywords":""},{"title":"Sobre este guia","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você aceite pagamentos online com PicPay, assim como o fluxo básico de um pagamento com QR Code e o ciclo de vida dos pagamentos. "},{"title":"Pré-requisitos","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#pré-requisitos","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"Como funciona?","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#autenticação","content":"O PicPay disponibiliza duas chaves de integração: O x-picpay-token e o x-seller-token. Para esta operação, você deverá utilizar o x-picpay-token em suas requisições. "},{"title":"Funcionamento básico","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#funcionamento-básico","content":"O PicPay funciona como uma forma de pagamento assíncrona, ou seja, uma intenção de pagamento é gerada através de nossa API de pagamento e permanece com o status pending até que o usuário efetue o pagamento com o aplicativo verdinho. Veja abaixo o fluxo básico de funcionamento dos pagamentos via QR Code.  Passo 1: O cliente seleciona o PicPay como forma de pagamento em seu e-commerce; Passo 2: Seu e-commerce deve efetuar uma chamada (server-side) para nossa API de pagamentos (/payments), gerando uma intenção de pagamento com status pending dentro do PicPay; curl --location --request POST 'https://appws.picpay.com/ecommerce/public/payments' \\ --header 'x-picpay-token: {sua_chave_de_integracao}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ &quot;referenceId&quot;: &quot;102039&quot;, &quot;callbackUrl&quot;: &quot;http://localhost/mockVtexPostCallback/?httpStatus=200&quot;, &quot;expiresAt&quot;: &quot;2020-12-12T15:53:00+05:00&quot;, &quot;returnUrl&quot;: &quot;http://www.picpay.com/#transacaoConcluida&quot;, &quot;value&quot;: 10, &quot;additionalInfo&quot;: [ null ], &quot;buyer&quot;: { &quot;firstName&quot;: &quot;João&quot;, &quot;lastName&quot;: &quot;dos Testes&quot;, &quot;document&quot;: &quot;010.091.001-91&quot; } }' Copy Exemplo de request: O e-commerce cria uma intenção de pagamento de 10 reais no PicPay para o cliente João dos Testes Passo 3: O PicPay devolve o QR Code no retorno da chamada da API de pagamentos (URL para redirecionamento em paymentUrl e imagem codificada em qrcode.base64); { &quot;referenceId&quot;: &quot;102039&quot;, &quot;paymentUrl&quot;: &quot;https://app.picpay.com/checkout/NWZkOTFjZTA4.....ZWJmM2QxMzA2&quot;, &quot;qrcode&quot;: { &quot;content&quot;: &quot;https://app.picpay.com/checkout/NWZkOTFjZTA4.....ZWJmM2QxMzA2&quot;, &quot;base64&quot;: &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAIAAAAP3aGb...(muitos caracteres)..II=&quot; }, &quot;expiresAt&quot;: &quot;2020-12-12T08:53:00-02:00&quot; } Copy Exemplo de response para o request do passo 3. Passo 4: No seu e-commerce, você exibe o QR code para seu cliente efetuando o redirecionando para a URL ou exibindo o QR Code; Imagem 2 - Exemplo utilizando redirecionamento Imagem 3 - Exemplo utilizando o QRCode na página Passo 5: Caso identificarmos que seu cliente também é cliente PicPay, iremos enviar uma notificação dentro do aplicativo PicPay avisando sobre o pagamento pendente. Em todos os casos iremos enviar um e-mail de pagamento pendente contendo o link de nossa página de checkout. Neste momento, teremos uma intenção de pagamento com o status pending (saiba mais sobre o ciclo de vida dos pagamentos aqui); Passo 6: O cliente efetua o pagamento através do App PicPay (Com saldo ou cartão de crédito). Informação Caso o cliente não efetue o pagamento até a data de expiração (enviada no momento de criação), o pagamento passará para o status expired Passo 7: Caso o pagamento seja bem sucedido, o PicPay envia uma notificação para o e-commerce via POST na URL de callback, fornecida na requisição de pagamento como callbackUrl. Seu e-commerce deverá estar preparado para receber um POST no endpoint /callback, utilizando o x-seller-token no header para autenticação da requisição. Para que o recebimento do callback seja considerado confirmado, seu e-commerce deve responder com HTTP Status 200. curl -X POST \\ http://www.sualoja.com.br/callback \\ -H 'Content-Type: application/json' \\ -H 'x-seller-token: 4ef4edbd-5cda-42da-860b-0e8d7b90c784' \\ -d '{ &quot;referenceId&quot; : &quot;102030&quot;, &quot;authorizationId&quot; : &quot;555008cef7f321d00ef236333&quot; }' Copy Exemplo de notificação que o PicPay envia para o e-commerce. Informação Porém, por questões de segurança, não iremos informar o novo status nesta requisição. Para isto, sua loja (a partir do recebimento de nossa notificação) deverá consultar nosso endpoint de status de pedidos. Atenção Se o callback não chegar após o tempo determinado por você, recomendamos que uma consulta do status da ordem seja feita de forma direta (passo 8). Isso é aplicável para casos que precisem de confirmações instântaneas (compras presenciais ou vending-machines, por exemplo). Saiba mais sobre as notificações que o PicPay envia neste artigo. Passo 8: O seu e-commerce deve efetuar um GET utilizando o referenceId que enviamos por notificação, através para obtenção do status do pagamento. curl -X GET \\ https://appws.picpay.com/ecommerce/public/payments/{referenceId}/status \\ -H 'Content-Type: application/json' \\ -H 'x-picpay-token: {sua_chave_de_integracao}' \\ }' Copy Exemplo de notificação que o PicPay envia para o e-commerce. Passo 9: Caso o pagamento esteja confirmado, exibir confirmação no seu e-commerce. "},{"title":"Próximos passos","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#próximos-passos","content":"Entenda os possíveis status de um pagamento;Entenda como solicitar um cancelamento total;Entenda um pouco mais sobre as notificações que o PicPay envia; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Aceitando pagamentos com a API pública#","url":"/picpay-docs-digital-payments/checkout/guides/accepting-payments#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Solicitar cancelamentos","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order","content":"","keywords":""},{"title":"Sobre este guia","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você cancelar suas ordens pendentes ou pagas através de nossa API de e-commerce. "},{"title":"Pré-requisitos","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#pré-requisitos","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"Como funciona?","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#autenticação","content":"O PicPay disponibiliza duas chaves de integração: O x-picpay-token e o x-seller-token. Para esta operação, você deverá utilizar o x-picpay-token em suas requisições. "},{"title":"Funcionamento básico","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#funcionamento-básico","content":"Você poderá cancelar qualquer ordem gerada por seu e-commerce através de nosso end-point de cancelamento. Confira abaixo as regras: Cenário 1 Se já foi pago, o cliente PicPay será estornado caso sua conta de Lojista no PicPay tenha saldo para realizar o estorno e caso o cliente PicPay tenha recebido algum cashback nesta transação, este valor será estornado do cliente (para isto o mesmo deve possuir saldo). Todas esses requisitos devem ser cumpridos para que o estorno da transação ocorra com sucesso. Neste caso, o authorizationId também deve ser enviado no corpo da requisição. curl --location --request POST 'https://appws.picpay.com/ecommerce/public/payments/{referenceId}/cancellations' \\ --header 'x-picpay-token: {sua_chave_de_integracao}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ &quot;authorizationId&quot;: &quot;601327196d038600273bbf1c&quot; }' Copy Exemplo de cancelamento de ordem paga. No exemplo acima, esta ordem irá passar do status paid para refunded Cenário 2 Se ainda não foi pago, a transação será cancelada em nosso servidor e não permitirá pagamento por parte do cliente PicPay. Neste caso, o referenceId é suficiente para a operação. curl --location --request POST 'https://appws.picpay.com/ecommerce/public/payments/{referenceId}/cancellations' \\ --header 'x-picpay-token: {sua_chave_de_integracao}' \\ --header 'Content-Type: application/json' \\ --data-raw ''` Copy Exemplo de cancelamento de ordem pendente. No exemplo acima, esta ordem irá passar do status created para expired. Para transações pagas com saldo, o valor será devolvido à carteira do usuário quase que imediatamente após a operação. O estorno de uma transação feita com cartão de crédito pode demorar alguns dias ser refletido na fatura do cliente. "},{"title":"Próximos passos","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#próximos-passos","content":"Entenda os possíveis status de um pagamento;Entenda um pouco mais sobre as notificações que o PicPay envia; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Solicitar cancelamentos","url":"/picpay-docs-digital-payments/checkout/guides/cancel-order#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Identificação de canais","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/change-log/identificando-meu-canal","content":"","keywords":""},{"title":"O que muda?","type":1,"pageTitle":"Identificação de canais","url":"/picpay-docs-digital-payments/change-log/identificando-meu-canal#o-que-muda","content":"Com essa mudança, podemos identificar e atuar mais rapidamente em casos de suporte além de ter uma visão consolidada do volume e transações de todos os lojistas que estão sob sua integração. "},{"title":"Como utilizar","type":1,"pageTitle":"Identificação de canais","url":"/picpay-docs-digital-payments/change-log/identificando-meu-canal#como-utilizar","content":"Tá fácil! =) Basta incluir o campo channel em sua requisição e indicar o nome do seu canal. Desta forma já conseguiremos identificar suas transações. curl --location --request POST 'https://appws.picpay.com/ecommerce/public/payments' \\ --header 'x-picpay-token: {sua_chave_de_integracao}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ &quot;referenceId&quot;: &quot;102039&quot;, &quot;callbackUrl&quot;: &quot;http://localhost/mockVtexPostCallback/?httpStatus=200&quot;, &quot;expiresAt&quot;: &quot;2020-12-12T15:53:00+05:00&quot;, &quot;returnUrl&quot;: &quot;http://www.picpay.com/#transacaoConcluida&quot;, &quot;value&quot;: 10, &quot;additionalInfo&quot;: [ null ], &quot;channel&quot; : &quot;name-of-your-channel&quot;, &quot;purchaseMode&quot; : &quot;in-store&quot;, &quot;buyer&quot;: { &quot;firstName&quot;: &quot;João&quot;, &quot;lastName&quot;: &quot;dos Testes&quot;, &quot;document&quot;: &quot;010.091.001-91&quot; } }' Copy "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Identificação de canais","url":"/picpay-docs-digital-payments/change-log/identificando-meu-canal#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Ficou alguma dúvida? Você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Olá, mundo físico","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/change-log/Pagamentos digitais para mundo físico","content":"","keywords":""},{"title":"O que muda?","type":1,"pageTitle":"Olá, mundo físico","url":"/picpay-docs-digital-payments/change-log/Pagamentos digitais para mundo físico#o-que-muda","content":"Compras em lojas físicas fazem com que os lojistas nem sempre possuam dados de seus clientes, como por exemplo CPF, e-mail, telefone, etc. Solicitá-los no momento da transação presencial pode criar fricção para o ponto de venda e por isso removemos a obrigatoriedade destes dados. "},{"title":"Como utilizar","type":1,"pageTitle":"Olá, mundo físico","url":"/picpay-docs-digital-payments/change-log/Pagamentos digitais para mundo físico#como-utilizar","content":"É muito simples! =) Basta incluir o campo purchaseMode em sua requisição com o valor in-store e pronto! Desta forma os dados de buyer deixam de ser obrigatórios. Confira um exemplo abaixo: curl --location --request POST 'https://appws.picpay.com/ecommerce/public/payments' \\ --header 'x-picpay-token: {sua_chave_de_integracao}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ &quot;referenceId&quot;: &quot;102039&quot;, &quot;callbackUrl&quot;: &quot;http://localhost/mockVtexPostCallback/?httpStatus=200&quot;, &quot;expiresAt&quot;: &quot;2020-12-12T15:53:00+05:00&quot;, &quot;returnUrl&quot;: &quot;http://www.picpay.com/#transacaoConcluida&quot;, &quot;value&quot;: 10, &quot;additionalInfo&quot;: [ null ], &quot;channel&quot; : &quot;name-of-your-channel&quot;, &quot;purchaseMode&quot; : &quot;in-store&quot;, &quot;buyer&quot;: { &quot;firstName&quot;: &quot;João&quot;, &quot;lastName&quot;: &quot;dos Testes&quot;, &quot;document&quot;: &quot;010.091.001-91&quot; } }' Copy Importante Apesar de não ser obrigatório, você ainda poderá enviar os dados de buyer na requisição. Lembre-se que os níveis de conversão aumentam consideravelmente quando os dados de buyer são enviados, já que o cliente recebe uma notificação via push. "},{"title":"Ponto de atenção","type":1,"pageTitle":"Olá, mundo físico","url":"/picpay-docs-digital-payments/change-log/Pagamentos digitais para mundo físico#ponto-de-atenção","content":"As credenciais do lojista serão bloqueadas caso o PicPay identifique que o mesmo está enviando transações 100% online (como, por exemplo, transações de e-commerce como in-store), apenas para &quot;driblar&quot; a obrigatoriedade dos dados de buyer. "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Olá, mundo físico","url":"/picpay-docs-digital-payments/change-log/Pagamentos digitais para mundo físico#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Ficou alguma dúvida? Você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Gerenciar notificações","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/guides/notifications","content":"","keywords":""},{"title":"Sobre este guia","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você receba notificações sobre mudança de status de suas ordens geradas através de nossa API de e-commerce. "},{"title":"Pré-requisitos","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#pré-requisitos","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"Como funciona?","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#autenticação","content":"O PicPay disponibiliza duas chaves de integração: O x-picpay-token e o x-seller-token. Para esta operação, você deverá estar pronto para receber requisições em seus servidores, utilizando o x-seller-token para autenticar as requisições. "},{"title":"Funcionamento básico","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#funcionamento-básico","content":"Após qualquer mudança de status em suas ordens o PicPay notificará a URL de callback (callbackUrl) informada no momento da requisição de pagamento. Acompanhe abaixo como seu e-commerce deve estar preparado para receber as notificações. Passo 1: Imediatamente após qualquer mudança de status de uma ordem, o PicPay envia uma notificação para seu e-commerce via POST na URL de callback, fornecida na requisição de pagamento como callbackUrl. Seu e-commerce deverá estar preparado para receber um POST no endpoint /callback, utilizando o x-seller-token no header para autenticação da requisição. Para que o recebimento do callback seja considerado confirmado, seu e-commerce deve responder com HTTP Status 200. curl -X POST \\ http://www.sualoja.com.br/callback \\ -H 'Content-Type: application/json' \\ -H 'x-seller-token: 4ef4edbd-5cda-42da-860b-0e8d7b90c784' \\ -d '{ &quot;referenceId&quot; : &quot;102030&quot;, &quot;authorizationId&quot; : &quot;555008cef7f321d00ef236333&quot; }' Copy Exemplo de notificação que o PicPay envia para o e-commerce. Por questões de segurança é extremamente importante que o seu e-commerce faça a validação do x-seller-token Passo 2: O seu e-commerce deve efetuar um GET utilizando o referenceId que enviamos por notificação, através para obtenção do novo status do pagamento. curl -X GET \\ https://appws.picpay.com/ecommerce/public/payments/{referenceId}/status \\ -H 'Content-Type: application/json' \\ -H 'x-picpay-token: {sua_chave_de_integracao}' \\ ' Copy Exemplo de obtenção de status "},{"title":"Situações de notificação","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#situações-de-notificação","content":"Seu e-commerce será notificado nas seguintes situações: Pedido expirado: não é mais possível paga-lo usando PicPay;Pagamento em análise: usuário pagou porém o pagamento está sob análise;Pedido pago;Pedido completado: saldo disponível para saque;Pagamento devolvido: foi pago e estornado para o cliente;Pagamento com chargeback: cliente solicitou à operadora o cancelamento do pagamento; "},{"title":"Próximos passos","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#próximos-passos","content":"Entenda os possíveis status de um pagamento;Entenda como solicitar um cancelamento total; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Gerenciar notificações","url":"/picpay-docs-digital-payments/checkout/guides/notifications#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"API Reference E-commerce","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/api-reference-e-commerce","content":"","keywords":""},{"title":"Como começar","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/intro/getting-started","content":"","keywords":""},{"title":"Antes de começar","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/checkout/intro/getting-started#antes-de-começar","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas para a utilização da nossa API. Você pode obter suas credenciais através desta página. Após finalizar o seu cadastro, suas credenciais estarão disponíveis no painel lojista, na aba Integrações. Informação Suas credenciais são únicas e nunca devem ser compartilhadas com terceiros.  Atenção A geração de novos tokens no portal tem efeito imediato e invalida as credencias geradas anteriormente. "},{"title":"Opções de integração","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/checkout/intro/getting-started#opções-de-integração","content":"O PicPay disponibiliza algumas formas de integração. Abaixo vamos falar um pouco mais sobre cada uma para que você possa entender qual é a melhor opção para o seu e-commerce. Integração\tA quem se destina\tLink para o passo-a-passoVTEX\tLojistas que já estão integrados ou possuem uma parceria com a VTEX;\tEm breve Magento 2\tLojistas que possuem seus e-commerces com Magento 2\tEm breve API Pública\tLojistas que desejam criar e customizar sua própria experiência (Seja via web, aplicativo ou outros canais).\tlink Informação Estamos trabalhando para desenvolver novas integrações. Quer saber mais ou tem interesse em alguma plataforma específica? Nos envie um e-mail para relacionamento-empresas@picpay.com. É desenvolvedor e tem necessidade de alguma plataforma? Aceitamos PRs "},{"title":"Testando sua integração","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/checkout/intro/getting-started#testando-sua-integração","content":"Atualmente o PicPay não disponibiliza ambiente de SandBox. Todos os testes serão feitos no ambiente de produção e não geram qualquer ônus ao desenvolvedor/lojista, sendo que todos os pagamentos realizados podem ser imediatamente estornados (Através de nossa API de cancelamento, ou pelo painel lojista).  "},{"title":"Próximos passos","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/checkout/intro/getting-started#próximos-passos","content":"Aceitando pagamentos com a API pública;Entenda os possíveis status de um pagamento;Entenda como solicitar um cancelamento total;Entenda um pouco mais sobre as notificações que o PicPay envia; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/checkout/intro/getting-started#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com "},{"title":"API Reference","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/resources/api-reference","content":"","keywords":""},{"title":"API Reference Legacy","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/resources/api-reference-legacy","content":"","keywords":""},{"title":"API Reference E-commerce (English)","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/resources/english/api-reference","content":"","keywords":""},{"title":"FAQ e-commerce","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/resources/faq","content":"","keywords":""},{"title":"Dúvidas frequentes","type":1,"pageTitle":"FAQ e-commerce","url":"/picpay-docs-digital-payments/checkout/resources/faq#dúvidas-frequentes","content":"O que é o PicPay e-commercePicPay E-commerce é uma modalidade voltada para quem possui um site ou loja online e quer receber pagamentos via PicPay. O pagamento com PicPay é fácil e rápido, em qualquer situação. Seja via computador ou smartphone, os usuários concluem o pagamento dos pedidos pelo aplicativo. "},{"title":"Outras dúvidas","type":1,"pageTitle":"FAQ e-commerce","url":"/picpay-docs-digital-payments/checkout/resources/faq#outras-dúvidas","content":"Para mais perguntas e respostas acesse este link para nosso FAQ geral. "},{"title":"Não achou o que precisava?","type":1,"pageTitle":"FAQ e-commerce","url":"/picpay-docs-digital-payments/checkout/resources/faq#não-achou-o-que-precisava","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com "},{"title":"API Reference","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click-en/resources/api-reference","content":"Atenttion To consume the following resources you need to had done all te steps into Authentication and Authorization Guide, to get a valid access_token for the requests.","keywords":""},{"title":"Obter status do pagamento","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/guides/order-status","content":"","keywords":""},{"title":"Sobre este guia","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você consulte o status de suas ordens geradas através de nossa API de e-commerce. "},{"title":"Pré-requisitos","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#pré-requisitos","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"Como funciona?","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#autenticação","content":"O PicPay disponibiliza duas chaves de integração: O x-picpay-token e o x-seller-token. Para esta operação, você deverá utilizar o x-picpay-token em suas requisições. "},{"title":"Funcionamento básico","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#funcionamento-básico","content":"Você poderá consultar o status de toda ordem gerada por seu e-commerce através do referenceId único informado no momento da requisição de pagamento. O endpoint de consulta irá retornar apenas o status de sua ordem, assim como os campos informados dentro de additional_info. Informação Os dados do comprador ou o QRCode gerado na criação da intenção de pagamento não serão devolvidos pelo endpoint de consulta. Passo 1: O seu e-commerce deve efetuar um GET utilizando o referenceId informado no momento da requisição (e que também enviamos por notificação a cada mudança de status). Entende um pouco mais sobre notificações [aqui] curl -X GET \\ https://appws.picpay.com/ecommerce/public/payments/{referenceId}/status \\ -H 'Content-Type: application/json' \\ -H 'x-picpay-token: {sua_chave_de_integracao}' \\ '` Copy Exemplo de requisição para consultar o status de uma ordem. "},{"title":"Ciclo de vida de um pagamento","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#ciclo-de-vida-de-um-pagamento","content":"Ao chamar o endpoint de pagamentos, uma ordem é gerada dentro do PicPay com status created. A ordem de status created poderá ser ou paga ou cancelada. Caso seja cancelada ou atinja a data de expiração (informada em expirationDate, no momento da criação da ordem), a ordem passara para o status expired. As ordens pagas com sucesso pelos usuários terão seu status atualizado para paid. Caso o PicPay identifique algum comportamento fraudulento no processo de pagamentos, irá analisar a ordem que por sua vez ficará com o status analysis. Abaixo um resumo sobre os status explicados acima, assim como outros status relevantes: created: registro criado;expired: prazo para pagamento expirado ou ordem cancelada;analysis: pago e em processo de análise anti-fraude;paid: pago;completed: pago e saldo disponível;refunded: pago e devolvido;chargeback: pago e com chargeback; "},{"title":"Próximos passos","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#próximos-passos","content":"Entenda como solicitar um cancelamento total;Entenda um pouco mais sobre as notificações que o PicPay envia; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Obter status do pagamento","url":"/picpay-docs-digital-payments/checkout/guides/order-status#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Getting User Information","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info","content":"","keywords":"PicPay 1-Click Informations Birth Date e-mail Login"},{"title":"About this guide","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#about-this-guide","content":"In this guide we will describe the step-by-step for you to consult information of authenticated users through our logged payment solution. "},{"title":"before starting","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#before-starting","content":"Before processing online payments by our PicPay 1-Click solution, you must have a valid, non-expired access_token. You can check how to generate your tokens in this article. "},{"title":"How it works","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#how-it-works","content":""},{"title":"Authentication","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#authentication","content":"For this operation, only the access_token, generated dynamically, is needed "},{"title":"Getting basic information from logged in users","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#getting-basic-information-from-logged-in-users","content":"Just the access_token it is possible to obtain some basic information from the logged in client. Below an example: curl --location --request GET 'https://api.picpay.com/oauth2/userinfo' \\ --header 'Authorization: Bearer {access_token}' Copy Below is an example of a successful return. { &quot;seller&quot;: &quot;polenta.store@pm.me&quot;, &quot;sub&quot;: &quot;f:Xxxxxxx-xxxx-xxxx-xxxx-xxxxxxx:xxxxx&quot;, &quot;email_verified&quot;: true, &quot;birthdate&quot;: &quot;2020-03-05&quot;, &quot;preferred_username&quot;: &quot;polento&quot;, &quot;email&quot;: &quot;polenta.the.dog@gmail.com&quot; } Copy info The customer will authorize the e-commerce to have access to this information when consenting to permissions, explainedaqui Error Messages# If an error occurs, we will inform the reason in the response to the request. { &quot;error&quot;: &quot;invalid_token&quot;, &quot;error_description&quot;: &quot;Token verification failed&quot; } Copy "},{"title":"Next Steps","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#next-steps","content":"Making a charge;Requesting a refund; "},{"title":"Getting help","type":1,"pageTitle":"Getting User Information","url":"/picpay-docs-digital-payments/one-click-en/guides/user-info#getting-help","content":"We hope this article has helped! If you have any questions, you can consult our FAQ or contact us by e-mail : atendimento-empresas@picpay.com "},{"title":"Postman Collection","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/resources/postman","content":"","keywords":""},{"title":"Sobre este guia","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#sobre-este-guia","content":"Neste breve guia vamos descrever como utilizar o Postman como ferramenta de apoio em sua integração. "},{"title":"Pré-requisitos","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#pré-requisitos","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"O que posso fazer com esta collection?","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#o-que-posso-fazer-com-esta-collection","content":"Em nossa collection, disponibilizamos os seguintes endpoints: Endpoint para criação de pagamento;Endpoint de consulta de ordem;Endpoint para cancelamento;Simulação de callback; "},{"title":"Talk is cheap, show me the code!","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#talk-is-cheap-show-me-the-code","content":""},{"title":"Obtendo a collection","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#obtendo-a-collection","content":"Também é um fã de postman como nós? Acesse nossa collection através do botão abaixo:  "},{"title":"Configurar suas chaves de integração","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#configurar-suas-chaves-de-integração","content":"Após importar nossa collection, você poderá configurar suas chaves dentro das configurações de ambientes como exibido abaixo:  "},{"title":"Não achou o que precisava?","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/checkout/resources/postman#não-achou-o-que-precisava","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com "},{"title":"VTEX","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/plugins/vtex","content":"","keywords":""},{"title":"Introdução","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#introdução","content":"Neste guia vamos descrever o passo-a-passo para que você possa utilizar PicPay dentro do seu e-commerce com VTEX. "},{"title":"Antes de começar","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#antes-de-começar","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"Como utilizar","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#como-utilizar","content":""},{"title":"Obtendo suas chaves de integração","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#obtendo-suas-chaves-de-integração","content":"Suas chaves de integração estarão disponíveis dentro do painel lojista, no menu integrações.  Estas chaves deverão ser copiadas e inseridas dentro do seu painel de configuração da VTEX. Atenção Toda vez que novos tokens são gerados através do botão Gerar Tokens, os tokens antigos serão invalidados. Problemas na obtenção de chaves. Por conta de uma instabilidade em nosso novo painel lojista (https://painel-empresas.picpay.com/) recomendamos que as chaves de integração da VTEX sejam obtidas através do painel lojista antigo (https://lojista.picpay.com/ecommerce-token). "},{"title":"Habilitando o PicPay como forma de pagamento","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#habilitando-o-picpay-como-forma-de-pagamento","content":"Dentro de seu painel da VTEX, você deverá configurar o PicPay como um novo gateway de pagamentos. Passo 1 - Dentro da sessão de pagamentos, clique em Congigurações  Passo 2 -Na aba Afiliações de Gateways, clique no botão +.  Passo 3 -Selecionar o conector PicPay.  "},{"title":"Configurando suas chaves dentro da VTEX","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#configurando-suas-chaves-dentro-da-vtex","content":"Preencha os campos Application Key e Application Token com as informações da sua conta PicPay e salve as configurações.  "},{"title":"Próximos passos","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#próximos-passos","content":"Entenda os possíveis status de um pagamento; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"VTEX","url":"/picpay-docs-digital-payments/checkout/plugins/vtex#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"API Reference","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/resources/api-reference","content":"Atenção Para consumir os recursos abaixo você precisa ter realizado todos os passos do Guia de Autenticação e Autorização, e possuir um access_token válido a disposição.","keywords":""},{"title":"Payments Processing","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments","content":"","keywords":"PicPay 1-Click Payments Login"},{"title":"About this guide","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#about-this-guide","content":"In this guide we will describe the step-by-step process for you to process payments with PicPay by our logged payment solution. "},{"title":"before starting","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#before-starting","content":"Before processing online payments by our PicPay 1-Click solution, you must have a valid, non-expired access_token. You can check how to generate your tokens in this article. "},{"title":"How it works","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#how-it-works","content":""},{"title":"Authentication","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#authentication","content":"In addition to the access_token, generated dynamically, the payment end-point also needs an Api-Key that will be informed with your client_id and client_secret. About the Api-Key The Api-Key must not be shared in any way and must be stored securely on their servers. "},{"title":"Generating a charge to the user's wallet","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#generating-a-charge-to-the-users-wallet","content":"With a valid access_token, the process of generating a charge on the customer's wallet is extremely simple. The charge must be generated by the end-point v1/payments/charge, indicating the amount to be debited in the body of the request. In the example below, we are requesting the charge of BRL 3.00 to the user's wallet. curl --location --request POST 'https://api.picpay.com/v1/payments/charge' \\ --header 'Api-Key: {{api_key}}' \\ --header 'Authorization: Bearer {access_token}' \\ --header 'Content-Type: application/json' \\ --data '{&quot;value&quot;:3}' Copy Below is an example of a successful return. The transaction_id must be saved as it is the key for reversal processes. { &quot;transaction_id&quot;: &quot;246599282&quot;, &quot;created_at&quot;: &quot;2021-02-22 19:29:16&quot; } Copy What will be the origin of the funds?# The charge amount may be debited from the credit card, balance or both (balance + card). If the customer has the Use balance option enabled in the App, we will first consume the user's balance and later (if there is not enough balance), charge the card. Example: I'm making a purchase of R$60, I have a balance of R$19 in my wallet. PicPay will consume R$19 and charge the registered card for R$41. Error Messages# We do not report error codes on transaction returns. We only inform you if the transaction was approved or not. { &quot;message&quot;:&quot;Unauthorized transaction.&quot; } Copy "},{"title":"Next Steps","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#next-steps","content":"Requesting a refund;Consulting user information; "},{"title":"Getting help","type":1,"pageTitle":"Payments Processing","url":"/picpay-docs-digital-payments/one-click-en/guides/process-payments#getting-help","content":"We hope this article has helped! If you have any questions, you can consult our FAQ or contact us by e-mail : relacionamento-empresas@picpay.com. "},{"title":"Refunding Payments","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments","content":"","keywords":"PicPay 1-Click Refund Login"},{"title":"About this guide","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#about-this-guide","content":"In this guide, we will describe the step-by-step process for you to request refunds for payments generated by our logged-in payment solution. "},{"title":"Before Starting","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#before-starting","content":"Before processing online payments by our PicPay 1-Click solution, you must have a valid, non-expired access_token. You can check how to generate your tokens in this article. "},{"title":"How It works","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#how-it-works","content":""},{"title":"Authentication","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#authentication","content":"In addition to the access_token, generated dynamically, the payment end-point needs an Api-Key that will be informed with your client_id and client_secret. about the Api-Key The Api-Key must not be shared in any way and must be stored securely on their servers. "},{"title":"Requesting a refund of a charge to the user's wallet","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#requesting-a-refund-of-a-charge-to-the-users-wallet","content":"The refund request must be generated with the transaction_id by the end-point v1/payments/{{transaction_id}}/refund, indicating the amount to be refunded in the body of the request. In the example below, we are requesting a refund of BRL 3.00 in the user's wallet. Information The transaction_id is generated when creating the payment. curl --location --request POST 'https://api.picpay.com/v1/payments/{{transaction_id}}/refund' \\ --header 'Api-Key: {{api_key}}' \\ --header 'Authorization: Bearer {access_token}' \\ --header 'Content-Type: application/json' \\ --data '{&quot;value&quot;:3}' Copy If the request is successfully processed, it will return an HTTP code 204 How will the refund be made?# The balance will be returned to the same place where the funds originated: If the transaction was made by credit card, it will be reversed on the card;If the transaction was made in the balance, the balance will return to the customer's wallet;If the transaction is mixed (Balance + Card), part will return as balance in the wallet and part will be reversed on the card; Error messages# We do not report error codes in the chargeback process. We only inform if the transaction was reversed or not. Example: { &quot;message&quot;: &quot;Transaction could not be refund&quot; } Copy "},{"title":"Next Steps","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#next-steps","content":"Consulting user informations; "},{"title":"Getting help","type":1,"pageTitle":"Refunding Payments","url":"/picpay-docs-digital-payments/one-click-en/guides/refund-payments#getting-help","content":"We hope this article has helped! If you have any questions, you can consult our FAQ or contact us by email:relacionamento-empresas@picpay.com. "},{"title":"Como começar","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/intro/getting-started","content":"","keywords":"PicPay 1-Click Pagamento Login"},{"title":"Antes de começar","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/one-click/intro/getting-started#antes-de-começar","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Atualmente, a solução de PicPay 1-Click não está disponível para todos os nossos lojistas. Se interessou? Basta entrar em contato através do e-mail relacionamento-empresas@picpay.com demonstrando interesse. "},{"title":"Testando sua integração","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/one-click/intro/getting-started#testando-sua-integração","content":"Atualmente o PicPay não disponibiliza ambiente de SandBox. Todos os testes serão feitos no ambiente de produção e não geram qualquer ônus ao desenvolvedor/lojista, sendo que todos os pagamentos realizados podem ser imediatamente estornados (através de nossa API de cancelamento ou pelo painel lojista).  "},{"title":"Próximos passos","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/one-click/intro/getting-started#próximos-passos","content":"Autenticação e autorização;Efetuando uma cobrança;Solicitando um reembolso;Consultando informações dos usuários; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Como começar","url":"/picpay-docs-digital-payments/one-click/intro/getting-started#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com "},{"title":"Magento","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/checkout/plugins/magento","content":"","keywords":""},{"title":"Introdução","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#introdução","content":"Neste guia vamos descrever o passo-a-passo para que você possa utilizar PicPay dentro do seu e-commerce com Magento 1 ou 2. "},{"title":"Antes de começar","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#antes-de-começar","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Você pode conferir como obter suas credenciais neste artigo. "},{"title":"Como utilizar","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#como-utilizar","content":""},{"title":"Acessar a página oficial dos plugins do GitHub","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#acessar-a-página-oficial-dos-plugins-do-github","content":"Link para Magento 1: https://github.com/PicPay/magento1Link para Magento 2: https://github.com/PicPay/magento2 "},{"title":"Instalação para Magento 1","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#instalação-para-magento-1","content":"Para configurar o PicPay como forma de pagamento no Magento 1 disponibilizamos duas opções: CDN Efetue o download de nosso plugin através de nosso CDN e copie os arquivos para seu ambiente: https://cdn.picpay.com/ecommerce/Picpay_Payment-1.0.2.tgz Composer Efetue a instalação utilizando Composer. composer require picpay/magento1 Copy "},{"title":"Instalação para Magento 2","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#instalação-para-magento-2","content":"Composer Efetue a instalação utilizando Composer. Passo 1 composer require picpay/magento2 Copy Passo 2 php bin/magento setup:upgrade Copy "},{"title":"Configurando suas chaves dentro dos Plugins","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#configurando-suas-chaves-dentro-dos-plugins","content":"Em breve. "},{"title":"Próximos passos","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#próximos-passos","content":"Entenda os possíveis status de um pagamento;Entenda como solicitar um cancelamento total;Entenda um pouco mais sobre as notificações que o PicPay envia; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Magento","url":"/picpay-docs-digital-payments/checkout/plugins/magento#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com Adicionalmente, você também pode abrir um issue em nossos repositórios de Magento 1 ou Magento 2. "},{"title":"Postman Collection","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection","content":"","keywords":""},{"title":"Sobre este guia","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#sobre-este-guia","content":"Neste breve guia vamos descrever como utilizar o Postman como ferramente de apoio em sua integração. "},{"title":"Pré-requisitos","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#pré-requisitos","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Atualmente, a solução PicPay 1-Click não está disponível para todos os nossos lojistas. Se interessou? Basta entrar em contato através do e-mail relacionamento-empresas@picpay.com demonstrando interesse. "},{"title":"O que posso fazer com esta collection?","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#o-que-posso-fazer-com-esta-collection","content":"Em nossa collection, disponibilizamos os seguintes end-points: End-point para geração de tokens;End-point de atualização de tokens;End-point para reembolso;End-point para cobrança;End-point para obter informações de usuários; "},{"title":"Talk is cheap, show me the code!","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#talk-is-cheap-show-me-the-code","content":""},{"title":"Obtendo a collection","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#obtendo-a-collection","content":"Também é um fã de postman como nós? Acesse nossa collection através do botão abaixo:  "},{"title":"Configurar suas chaves de integração","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#configurar-suas-chaves-de-integração","content":"Após importar nossa collection, você poderá configurar suas chaves dentro nas configurações de ambientes como exibido abaixo:  "},{"title":"Não achou o que precisava?","type":1,"pageTitle":"Postman Collection","url":"/picpay-docs-digital-payments/one-click/resources/postman-collection#não-achou-o-que-precisava","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com "},{"title":"Obtendo informações do usuário","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/guides/user-info","content":"","keywords":"PicPay 1-Click Informações Data de nascimento e-mail Login"},{"title":"Sobre este guia","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você consulte informações de usuários autenticados através de nossa solução de pagamentos logada. "},{"title":"Antes de começar","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#antes-de-começar","content":"Antes de processar pagamentos online através de nossa solução de PicPay 1-Click, você deve possuir um access_token válido e não expirado. Você pode conferir como gerar seus tokens neste artigo. "},{"title":"Como funciona","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#autenticação","content":"Para esta operação, apenas o access_token, gerado dinamicamente, é necessário "},{"title":"Obtendo informações básicas dos usuários logado","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#obtendo-informações-básicas-dos-usuários-logado","content":"Apenas com o access_token é possível obter algumas informaões básicas do cliente logado. Abaixo um exemplo: curl --location --request GET 'https://api.picpay.com/oauth2/userinfo' \\ --header 'Authorization: Bearer {access_token}' Copy Abaixo um exemplo de retorno de sucesso. { &quot;seller&quot;: &quot;polenta.store@pm.me&quot;, &quot;sub&quot;: &quot;f:Xxxxxxx-xxxx-xxxx-xxxx-xxxxxxx:xxxxx&quot;, &quot;email_verified&quot;: true, &quot;birthdate&quot;: &quot;2020-03-05&quot;, &quot;preferred_username&quot;: &quot;polento&quot;, &quot;email&quot;: &quot;polenta.the.dog@gmail.com&quot; } Copy info O cliente irá autorizar o e-commerce a ter acesso a essas informações no momento do consentimento de permissões, explicado aqui Mensagens de erro# Caso algum erro ocorra, informaremos o motivo na resposta da requisição { &quot;error&quot;: &quot;invalid_token&quot;, &quot;error_description&quot;: &quot;Token verification failed&quot; } Copy "},{"title":"Próximos passos","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#próximos-passos","content":"Efetuando uma cobrança;Solicitando um reembolso; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Obtendo informações do usuário","url":"/picpay-docs-digital-payments/one-click/guides/user-info#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Autenticação e autorização","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow","content":"","keywords":"PicPay 1-Click Autenticação Autorização Login Token"},{"title":"Sobre este guia","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você obtenha um token de acesso para processar pagamentos online com o PicPay através de nossa solução de pagamentos logada. "},{"title":"Antes de começar","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#antes-de-começar","content":""},{"title":"Registro do aplicativo","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#registro-do-aplicativo","content":"Antes de iniciar sua integração, você deve possuir credenciais válidas. Atualmente, para este produto, o processo de criação de credenciais é realizado diretamente pelo time do PicPay. Para esta solução de pagamentos, o e-commerce já deve ser um parceiro do PicPay. Os dados necessários para realizar o registro do aplicativo são: E-mail de cadastro;URL de redirecionamento ou URL de callback; info A solução de PicPay 1-Click não está disponível para todos os nossos lojistas. Se interessou? Basta entrar em contato através do e-mail relacionamento-empresas@picpay.com demonstrando interesse. "},{"title":"Obtenção do client_id e client_secret","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#obtenção-do-client_id-e-client_secret","content":"Após o registro do aplicativo, o PicPay compartilhará com o e-commerce as credenciais de acesso, na forma de um client_id e um client_secret. Um pouco mais sobre o client_id# O client ID é uma sequência exposta publicamente usada pela API de serviço para identificar o aplicativo e também para criar URLs de autorização que são apresentadas aos usuários. Um pouco mais sobre o client_secret# O client secret é usado para autenticar a identidade do aplicativo na API de serviço quando o aplicativo solicita o acesso à conta de um usuário e deve ser mantido privado entre o aplicativo e a API. "},{"title":"Como funciona?","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#como-funciona","content":"O fluxo básico de autenticação e autorização consiste na geração de um código após o usuário digitar seu login/senha em uma interface do PicPay. Com o código gerado, o e-commerce deve gerar um token que será utilizado em toda comunicação server to server com o PicPay. Este token possibilitará que o usuário efetue as seguintes operações (dependendo do escopo configurado): Processar pagamentos;Reembolsar pagamentos;Obter informações do usuário; "},{"title":"Redirecionando usuário para tela de login e senha","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#redirecionando-usuário-para-tela-de-login-e-senha","content":"Inicialmente, seu e-commerce deverá redirecionar seus clientes para a página de login e senha do PicPay. Para isso, seu e-commerce deverá gerar a URL, que deverá conter seu client_id e url de redirecionamento. Exemplo: curl --location --request GET 'https://api.picpay.com/oauth2/auth?client_id=xxxxxxxxxxxx&amp;response_type=code&amp;redirect_uri=http://yourwebsite.com/api/payments' https://api.picpay.com/oauth2/auth?client_id=CLIENT_ID&amp;response_type=code&amp;redirect_uri=CALLBACK_URL&amp;scope=scopes Copy Breve explicação sobre os parametros da URL acima: client_id: Identificador da aplicação fornecido pelo PicPay;redirect_uri: URL para onde o serviço redireciona o agente do usuário após a concessão de um código de autorizaçãoresponse_type Deve ser igual a code, especificando que seu aplicativo está solicitando uma concessão de código de autorização "},{"title":"Solicitando a autorização do usuário","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#solicitando-a-autorização-do-usuário","content":"Ao utilizar a URL do passo anterior, o cliente será redirecionado para uma página de login e senha. Seu cliente deverá então efetuar o login através de seu usuário e senha do PicPay.  Após o login, o cliente deverá revisar as permissões solicitadas pelo aplicativo. Informação As permissões solicitadas irão depender das configurações de escopo setadas no momento da criação das credenciais.  Atenção O cliente poderá conceder ou não as permissões. Sua aplicação deverá estar preparada para receber os dois tipos de resposta. Após o concentimento inicial, o PicPay não solicitará novamente as permissões ao cliente. "},{"title":"Obtendo o código de autorização","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#obtendo-o-código-de-autorização","content":"Caso o cliente autorize o aplicativo no passo anterior, o usuário será redirecionado para a URL de retorno indicada. O código de autorização será enviado como um parâmetro junto a URL indicada e deverá ser utilizado para a geração dos tokens no passo seguinte.  "},{"title":"Solicitação dos tokens","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#solicitação-dos-tokens","content":"Para realizar as solicitações de pagamento, reembolso ou consulta de informações, o e-commerce deverá informar um token válido como um dos parâmetros do header de cada requisição. Para tanto, o e-commerce deverá solicitar um access token com o código de autorização obtido no passo 3 e o client_id e o client_secret. Exemplo de requisição de token: curl -X POST \\ https://api.picpay.com/oauth2/token \\ -H &quot;Content-Type='application/x-www-form-urlencoded'&quot; \\ -d &quot;grant_type=authorization_code&quot; \\ -d &quot;client_id=CLIENT_ID&quot; \\ -d &quot;code=AUTHORIZATION_CODE&quot; -d &quot;redirect_uri=REDIRECT_URI&quot; Copy Caso esteja tudo certo, enviaremos o token como no exemplo abaixo: { &quot;access_token&quot;: &quot;ACCESS_TOKEN&quot;, &quot;expires_in&quot;: 300, // tempo em segundos &quot;refresh_expires_in&quot;: 1800, &quot;refresh_token&quot;: &quot;REFRESH_TOKEN&quot;, &quot;token_type&quot;: &quot;bearer&quot;, &quot;id_token&quot;: &quot;ID_TOKEN&quot;, &quot;not-before-policy&quot;: 1585954424, &quot;session_state&quot;: &quot;fa158d89-9228-45c6-8486-e159f28b5bd5&quot;, &quot;scope&quot;: &quot;openid email profile&quot; } Copy Tempo de expiração de um token O tempo de expiração do token será exibido em segundos. Após a expiração o token deverá ser atualizado através do refresh_token. A duração dos tokens poderá ser configurada na criação e configuração das credenciais pelo PicPay. "},{"title":"Atualização dos tokens","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#atualização-dos-tokens","content":"Após um período pre-determinado, o access_token concedido à aplicação irá expirar, sendo necessária a solicitação de um novo access_token. Para isso, utiliza-se um refresh_token, gerado na mesma solicitação do access_token (ver Autenticação e Autorização). Abaixo um exemplo de requisição: curl -X POST \\ https://api.picpay.com/oauth2/token \\ -H &quot;Content-Type='application/x-www-form-urlencoded'&quot; \\ -d &quot;grant_type=refresh_token&quot; \\ -d &quot;client_id=CLIENT_ID&quot; \\ -d &quot;client_secret=CLIENT_SECRET&quot; \\ -d &quot;refresh_token=REFRESH_TOKEN&quot; Copy Fluxo de atualização de tokens O fluxo de atualização de tokens precisa ser obrigatoriamente previsto em sua aplicação dado que o refresh_token irá expirar em algum momento. Caso o token não seja atualizado o usuário deverá fazer login e senha novamente. "},{"title":"Próximos passos","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#próximos-passos","content":"Com um access_token válido, seu aplicativo poderá efetuar cobranças, reembolsos ou consultar algumas informações básicas dos usuários. Confira abaixo os próximos passos: Efetuando uma cobrança;Solicitando um reembolso;Consultando informações dos usuários; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Autenticação e autorização","url":"/picpay-docs-digital-payments/one-click/guides/oauth2-flow#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Processando pagamentos","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/guides/process-payments","content":"","keywords":"PicPay 1-Click Pagamento Login"},{"title":"Sobre este guia","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você processe pagamentos com o PicPay através de nossa solução de pagamentos logada. "},{"title":"Antes de começar","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#antes-de-começar","content":"Antes de processar pagamentos online através de nossa solução de PicPay 1-Click, você deve possuir um access_token válido e não expirado. Você pode conferir como gerar seus tokens neste artigo. "},{"title":"Como funciona","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#autenticação","content":"Além do access_token, gerado dinamicamente, o end-point de pagamentos necessita também de uma Api-Key que lhe será informada junto com seu client_id e client_secret. Sobre o Api-Key O Api-Key não deverá ser compartilhado de forma alguma e deve ficar armazenado de forma segura em seus servidores. "},{"title":"Gerando uma cobrança na carteira do usuário","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#gerando-uma-cobrança-na-carteira-do-usuário","content":"Possuindo um access_token válido, o processo de geração de uma cobrança na carteira dos clientes é extremamente simples e fluido. A cobrança deverá ser gerada através do end-point v1/payments/charge, indicando o valor a ser debitado no corpo da requisição. No exemplo abaixo, estamos solicitando a cobrança de R$ 3,00 na carteira do usuário. curl --location --request POST 'https://api.picpay.com/v1/payments/charge' \\ --header 'Api-Key: {{api_key}}' \\ --header 'Authorization: Bearer {access_token} \\ --header 'Content-Type: application/x-www-form-urlencoded' \\ --data-urlencode 'value=3' Copy Abaixo um exemplo de retorno de sucesso. O campo transaction_id deve ser guardado pois é a chave para processos de estorno. { &quot;transaction_id&quot;: &quot;246599282&quot;, &quot;created_at&quot;: &quot;2021-02-22 19:29:16&quot; } Copy Qual será a origem dos fundos ?# O valor da cobrança poderá ser debitado do cartão de crédito, saldo ou ambos (saldo + cartão). Caso o cliente possua a opção de Usar saldo habilitada no App, iremos consumir primeiramente o saldo do usuário e posteriormente (caso não haja saldo suficiente), efetuar uma cobrança no cartão. Exemplo: Estou efetuando uma compra de R$60, possuo R$19 de saldo em minha carteira. O PicPay irá consumir os R$19 e efetuar uma cobrança de R$41 no cartão cadastrado. Mensagens de erro# Não informamos os códigos de erro nos retornos das transações. Apenas informamos se a transação foi aprovada ou não. { &quot;message&quot;:&quot;Unauthorized transaction.&quot; } Copy Timeout de cobrança# Atualmente um pagamento tem como timeout padrão o valor de 30 segundos. Esse gerenciamento é feito internamente para evitar problemas com cobranças indevidas. Na prática, caso o pagamento demore mais de 30s para retornar um sucesso a api vai retornar um erro 500 e caso o pagamento seja resolvido posteriormente ele automaticamente será desfeito através de um reembolso automático. Caso a sua api tenha um timeout diferente de 30 segundos será preciso solicitar essa alteração para a sua integração Nesses casos a requisição responderá com o HTTP Status Code 408 Request Timeout e com o seguinte body: { &quot;message&quot;: &quot;Request took too long to process.&quot;, &quot;business_code&quot;: &quot;REQUEST_TIMEOUT&quot; } Copy "},{"title":"Próximos passos","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#próximos-passos","content":"Solicitando um reembolso;Consultando informações dos usuários; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Processando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/process-payments#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Reembolsando pagamentos","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments","content":"","keywords":"PicPay 1-Click Reembolso Login"},{"title":"Sobre este guia","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#sobre-este-guia","content":"Neste guia vamos descrever o passo-a-passo para que você solicite reembolsos de pagamentos gerados através de nossa solução de pagamentos logada. "},{"title":"Antes de começar","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#antes-de-começar","content":"Antes de processar pagamentos online através de nossa solução de PicPay 1-Click, você deve possuir um access_token válido e não expirado. Você pode conferir como gerar seus tokens neste artigo. "},{"title":"Como funciona","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#como-funciona","content":""},{"title":"Autenticação","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#autenticação","content":"Além do access_token, gerado dinamicamente, o end-point de pagamentos necessita também de uma Api-Key que lhe será informada junto com seu client_id e client_secret. Sobre o Api-Key O Api-Key não deverá ser compartilhado de forma alguma e deverá ficar armazenado de forma segura em seus servidores. "},{"title":"Solicitando um reembolso de uma cobrança à carteira do usuário","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#solicitando-um-reembolso-de-uma-cobrança-à-carteira-do-usuário","content":"A solicitação de reembolso deverá ser gerada com o transaction_id através do end-point v1/payments/{{transaction_id}}/refund, indicando o valor a ser reembolsado no corpo da requisição. No exemplo abaixo, estamos solicitando o reembolso de R$ 3,00 na carteira do usuário. Informação O campo transaction_id é gerado no momento da criação do pagamento. curl --location --request POST 'https://api.picpay.com/v1/payments/{{transaction_id}}/refund' \\ --header 'Api-Key: {{api_key}}' \\ --header 'Authorization: Bearer {access_token}' \\ --header 'Content-Type: application/x-www-form-urlencoded' \\ --data-urlencode 'value=3' Copy Caso a solicitação seja processada com sucesso, retornará um código HTTP 204 Como será feito o reembolso?# O saldo será retornado ao mesmo lugar da origem dos fundos, ou seja: Caso a transação tiver sido feita por cartão de crédito, será estornada no cartão;Caso a transação tiver sido feita no saldo, o saldo retornará a carteira do cliente;Caso a transação seja mista (Saldo + Cartão), parte retornara como saldo na carteira e parte será estornada no cartão; Mensagens de erro# Não informamos os códigos de erro no processo de estorno. Apenas informamos se a transação foi estornada ou não. Exemplo: { &quot;message&quot;: &quot;Transaction could not be refund&quot; } Copy "},{"title":"Próximos passos","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#próximos-passos","content":"Consultando informações dos usuários; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Reembolsando pagamentos","url":"/picpay-docs-digital-payments/one-click/guides/refund-payments#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com. "},{"title":"Assinaturas","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/subscriptions","content":"","keywords":""},{"title":"Receba mensalmente de seus clientes e apoiadores","type":1,"pageTitle":"Assinaturas","url":"/picpay-docs-digital-payments/subscriptions#receba-mensalmente-de-seus-clientes-e-apoiadores","content":"PicPay Assinaturas é o serviço de pagamentos recorrentes do PicPay perfeito para clubes de assinatura, financiamentos coletivos, criadores de conteúdo e muito mais. Crie seu perfil, defina seus planos de assinatura e comece a receber. Esqueça a burocracia e tenha total controle do seu negócio. Acompanhe suas novas assinaturas, dados de seus assinantes, datas de pagamentos e mais. "},{"title":"Próximos passos","type":1,"pageTitle":"Assinaturas","url":"/picpay-docs-digital-payments/subscriptions#próximos-passos","content":"Como assinar; "},{"title":"Authentication and Authorization","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow","content":"","keywords":"PicPay 1-Click Authentication Authorization Login Token"},{"title":"About this guide","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#about-this-guide","content":"In this guide we will describe the step-by-step for you to obtain an access token to process online payments with PicPay by our logged payment solution. "},{"title":"Before Starting","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#before-starting","content":""},{"title":"Registro do aplicativo","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#registro-do-aplicativo","content":"Before starting your integration, you must have valid credentials. Currently for this product, the credentials creation process is done directly by the PicPay team For this payment solution, the e-commerce must already be a PicPay partner. The data required to register the application are: Registration email;Redirect URL or callback URL; info The PicPay 1-Click solution is not available to all our merchants. Interested? Just contact us by email: atrelationship-companies@picpay.com "},{"title":"Getting the client_id and client_secret","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#getting-the-client_id-and-client_secret","content":"After registering the application, the PicPay will share the access credentials with the e-commerce in the form of a client_id and a client_secret. More about the client_id# The ‘client ID’ is a publicly exposed string used by the service API to identify the application and also to create authorization URLs that are presented to users. More About the client_secret# The client secret is used to authenticate the app's identity to the service API when the app requests access to a user's account, and should be kept private between the app and the API. "},{"title":"How It works ?","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#how-it-works-","content":"The basic flow of authentication and authorization consists of generating a code after the user enters his login/password in a PicPay interface. With the generated code, the e-commerce must generate a token that will be used in all server to server communication with PicPay. This token will allow the user to perform the following operations (depending on the configured scope): Process payments;Refund payments;Get user information; "},{"title":"Redirecting user to login and password screen","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#redirecting-user-to-login-and-password-screen","content":"Initially, your e-commerce should redirect your customers to the PicPay login and password page. For this, your e-commerce must generate the URL, whith your client_id and redirection url. Example: curl --location --request GET 'https://api.picpay.com/oauth2/auth?client_id=xxxxxxxxxxxx&amp;response_type=code&amp;redirect_uri=http://yourwebsite.com/api/payments' https://api.picpay.com/oauth2/auth?client_id=CLIENT_ID&amp;response_type=code&amp;redirect_uri=CALLBACK_URL&amp;scope=scopes Copy Brief explanation of the above URL parameters: client_id: Application identifier provided by PicPay;redirect_uri: URL where the service redirects the user agent after granting an authorization coderesponse_type Must be equal code, specifying that your application is requesting an authorization code grant "},{"title":"Requesting user authorization","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#requesting-user-authorization","content":"When using the URL from the previous step, the client will be redirected to a login and password page. Your customer must have to login using his PicPay username and password.  After login, the customer must verify the permissions requested by the application. Information The requested permissions will depend on the scope settings set when creating the credentials.  Warning The client may or may not grant permissions. Your application must be prepared to receive two types of response. After the initial consent, PicPay will not ask the customer for permissions again. ###Getting the authorization code If the client authorizes the application in the previous step, the user will be redirected to the indicated return URL. The authorization code will be sent as a parameter along with the indicated URL and must be used to generate tokens in the next step.  "},{"title":"Token request","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#token-request","content":"In order to carry out requests for payment, reimbursement or querying information, the e-commerce must inform a valid token as one of the header parameters of each request. The e-commerce must request an access token with the authorization code obtained in step 3 and the client_id and client_secret. Example token request: curl -X POST \\ https://api.picpay.com/oauth2/token \\ -H &quot;Content-Type='application/x-www-form-urlencoded'&quot; \\ -d &quot;grant_type=authorization_code&quot; \\ -d &quot;client_id=CLIENT_ID&quot; \\ -d &quot;code=AUTHORIZATION_CODE&quot; -d &quot;redirect_uri=REDIRECT_URI&quot; Copy If everything is ok, we will send the token as in the example below: { &quot;access_token&quot;: &quot;ACCESS_TOKEN&quot;, &quot;expires_in&quot;: 300, // time in seconds &quot;refresh_expires_in&quot;: 1800, &quot;refresh_token&quot;: &quot;REFRESH_TOKEN&quot;, &quot;token_type&quot;: &quot;bearer&quot;, &quot;id_token&quot;: &quot;ID_TOKEN&quot;, &quot;not-before-policy&quot;: 1585954424, &quot;session_state&quot;: &quot;fa158d89-9228-45c6-8486-e159f28b5bd5&quot;, &quot;scope&quot;: &quot;openid email profile&quot; } Copy Expiration time of a token The token expiration time will be displayed in seconds. After expiration, the token must be refreshed using refresh_token. The duration of the tokens can be configured in the creation and configuration of credentials by PicPay. "},{"title":"Updating the Tokens","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#updating-the-tokens","content":"After a predetermined period, the access_token granted to the application will expire, requiring a request for a new access_token. For this, a refresh_token is used, generated in the same request as the access_token (see Authentication and Authorization). Below is an example of a request: curl -X POST \\ https://api.picpay.com/oauth2/token \\ -H &quot;Content-Type='application/x-www-form-urlencoded'&quot; \\ -d &quot;grant_type=refresh_token&quot; \\ -d &quot;client_id=CLIENT_ID&quot; \\ -d &quot;client_secret=CLIENT_SECRET&quot; \\ -d &quot;refresh_token=REFRESH_TOKEN&quot; Copy Token refresh flow The token refresh flow must be provided in your application as the refresh_token will expire at some point. If the token is not updated, the user must login and password again. "},{"title":"Next Steps","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#next-steps","content":"With a valid access_token, your application will be able to make charges, refunds or consult some basic user information. Check the next steps below: Making a charge;Requesting a refund;Consulting user informations; "},{"title":"Getting help","type":1,"pageTitle":"Authentication and Authorization","url":"/picpay-docs-digital-payments/one-click-en/guides/oauth2-flow#getting-help","content":"We hope this article has helped! If you have any questions, you can consult our FAQ or contact us by e-mail : relacionamento-empresas@picpay.com. "},{"title":"Webhooks","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/subscriptions/api-ref/webhooks","content":"","keywords":""},{"title":"Como assinar?","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/subscriptions/intro/sign-up","content":"","keywords":"PicPay Assinaturas"},{"title":"Como os usuários assinam seus planos","type":1,"pageTitle":"Como assinar?","url":"/picpay-docs-digital-payments/subscriptions/intro/sign-up#como-os-usuários-assinam-seus-planos","content":"Você faz um cadastro no nosso Painel Lojista, usa uma chave de integração no seu e-commerce e configura a aplicação em poucos passos. Após abrir o aplicativo, tocar no botão 'Pagar' na parte inferior da telaNo campo de busca na parte superior da tela, procurar seu perfil de assinaturasDepois de escolher o plano, é só confirmar a assinatura "},{"title":"Visão geral","type":0,"sectionRef":"#","url":"/picpay-docs-digital-payments/one-click/intro/overview","content":"","keywords":""},{"title":"O que é o PicPay 1-Click?","type":1,"pageTitle":"Visão geral","url":"/picpay-docs-digital-payments/one-click/intro/overview#o-que-é-o-picpay-1-click","content":"O PicPay 1-Click oferece uma forma de pagamento síncrona aos seus clientes efetuando cobranças na carteira de seus usuários, de forma transparente, após um consentimento inicial. Após efetuar o login em sua aplicação, o cliente autoriza cobranças em sua carteira e sua aplicação então gerencia as cobranças. "},{"title":"Taxas","type":1,"pageTitle":"Visão geral","url":"/picpay-docs-digital-payments/one-click/intro/overview#taxas","content":"Como a funcionalidade ainda não está aberta ao público, não temos uma taxa padrão. Para saber mais sobre nossas taxas ou a solução PicPay 1-Click, entre em contato através do e-mail relacionamento-empresas@picpay.com "},{"title":"Funcionalidades disponíveis.","type":1,"pageTitle":"Visão geral","url":"/picpay-docs-digital-payments/one-click/intro/overview#funcionalidades-disponíveis","content":"Atualmente, a API do PicPay 1-Click oferece as seguintes funcionalidades: Geração de cobrança na carteira dos usuários;Estorno total de valores aprovados;Consultar informações dos usuários logados; Saiba mais sobre cada funcionalidade nos nossos guias ao longo desta página. "},{"title":"Próximos passos","type":1,"pageTitle":"Visão geral","url":"/picpay-docs-digital-payments/one-click/intro/overview#próximos-passos","content":"Como começar; "},{"title":"Obtendo ajuda","type":1,"pageTitle":"Visão geral","url":"/picpay-docs-digital-payments/one-click/intro/overview#obtendo-ajuda","content":"Esperamos ter ajudado com este artigo! Caso tenha restado alguma dúvida, você pode consultar o nosso FAQ ou entrar em contato através do e-mail relacionamento-empresas@picpay.com "}]