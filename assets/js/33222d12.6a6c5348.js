"use strict";(self.webpackChunkpicpay=self.webpackChunkpicpay||[]).push([[6883],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>k});var n=t(67294);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=n.createContext({}),c=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},d=function(e){var a=c(e.components);return n.createElement(s.Provider,{value:a},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var t=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(t),u=o,k=p["".concat(s,".").concat(u)]||p[u]||m[u]||r;return t?n.createElement(k,i(i({ref:a},d),{},{components:t})):n.createElement(k,i({ref:a},d))}));function k(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=u;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},88358:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=t(87462),o=(t(67294),t(3905));const r={id:"idempotency-key",title:"Idempot\xeancia",sidebar_label:"Idempot\xeancia",hide_title:!1,description:"Aprenda como funciona a Idempot\xeancia no PicPay 1-Click",keywords:["PicPay 1-Click","Informa\xe7\xf5es","Idempot\xeancia","Idempotency-Key","API"]},i={unversionedId:"one-click/guides/idempotency-key",id:"one-click/guides/idempotency-key",isDocsHomePage:!1,title:"Idempot\xeancia",description:"Aprenda como funciona a Idempot\xeancia no PicPay 1-Click",source:"@site/docs/one-click/guides/idempotency-key.md",sourceDirName:"one-click/guides",slug:"/one-click/guides/idempotency-key",permalink:"/picpay-docs-digital-payments/one-click/guides/idempotency-key",version:"current",sidebar_label:"Idempot\xeancia",frontMatter:{id:"idempotency-key",title:"Idempot\xeancia",sidebar_label:"Idempot\xeancia",hide_title:!1,description:"Aprenda como funciona a Idempot\xeancia no PicPay 1-Click",keywords:["PicPay 1-Click","Informa\xe7\xf5es","Idempot\xeancia","Idempotency-Key","API"]},sidebar:"walletPicPay",previous:{title:"Obtendo informa\xe7\xf5es do usu\xe1rio",permalink:"/picpay-docs-digital-payments/one-click/guides/user-info"},next:{title:"API Reference",permalink:"/picpay-docs-digital-payments/one-click/resources/api-reference"}},l=[{value:"Sobre este guia",id:"sobre-este-guia",children:[]},{value:"Antes de come\xe7ar",id:"antes-de-come\xe7ar",children:[]},{value:"Como funciona",id:"como-funciona",children:[]},{value:"Pr\xf3ximos passos",id:"pr\xf3ximos-passos",children:[]},{value:"Obtendo ajuda",id:"obtendo-ajuda",children:[]}],s={toc:l},c="wrapper";function d(e){let{components:a,...t}=e;return(0,o.kt)(c,(0,n.Z)({},s,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"sobre-este-guia"},"Sobre este guia"),(0,o.kt)("p",null,"Neste guia vamos descrever o funcionamento da Idempot\xeancia no ",(0,o.kt)("strong",{parentName:"p"},"PicPay 1-Click"),"."),(0,o.kt)("h2",{id:"antes-de-come\xe7ar"},"Antes de come\xe7ar"),(0,o.kt)("p",null,"Antes de processar pagamentos online atrav\xe9s de nossa solu\xe7\xe3o de ",(0,o.kt)("strong",{parentName:"p"},"PicPay 1-Click"),", voc\xea deve possuir um ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token")," v\xe1lido e n\xe3o expirado. Voc\xea pode conferir como gerar seus tokens ",(0,o.kt)("a",{parentName:"p",href:"/one-click/guides/oauth2-flow"},"neste artigo"),"."),(0,o.kt)("h2",{id:"como-funciona"},"Como funciona"),(0,o.kt)("p",null,"A idempot\xeancia funciona como uma forma de evitar que a mesma solicita\xe7\xe3o seja executada duas vezes, garantindo assim que o mesmo evento n\xe3o seja lan\xe7ado de forma duplicada, assegurando a consist\xeancia dos dados enviados.\nSua utiliza\xe7\xe3o se d\xe1 a partir do envio do header ",(0,o.kt)("inlineCode",{parentName:"p"},"x-Idempotency-Key")," com um valor no formato de string com limita\xe7\xe3o de tamanho nas requisi\xe7\xf5es de pagamentos e reembolsos."),(0,o.kt)("h3",{id:""}),(0,o.kt)("p",null,"Esse valor ser\xe1 utilizado como uma chave para recuperar o resultado da mesma requisi\xe7\xe3o. Dessa forma, se o cliente tiver d\xfavidas se uma determinada solicita\xe7\xe3o foi acatada ou n\xe3o, basta reexecutar a requisi\xe7\xe3o com o mesmo valor no header ",(0,o.kt)("inlineCode",{parentName:"p"},"x-Idempotency-Key"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Caso exista uma requisi\xe7\xe3o j\xe1 processada, iremos repetir o mesmo resultado sem processar a requisi\xe7\xe3o novamente, assim, n\xe3o haver\xe1 duplica\xe7\xe3o de pagamento ou reembolso."),(0,o.kt)("li",{parentName:"ul"},"Caso n\xe3o exista uma requisi\xe7\xe3o j\xe1 processada para a chave enviada, iremos processar a requisi\xe7\xe3o normalmente.")),(0,o.kt)("p",null,"Caso exista algum tipo de processamento em andamento no momento da requisi\xe7\xe3o (cobran\xe7a ou reembolso) para aquela mesma chave, iremos retornar o HTTP status code 208 - Already Reported. \xc9 necess\xe1rio repetir a chamada para ter certeza de que a opera\xe7\xe3o foi finalizada."),(0,o.kt)("p",null,"\xc9 importante destacar que, caso o erro seja do tipo retent\xe1vel, uma nova requisi\xe7\xe3o com a mesma chave de idempot\xeancia resultar\xe1 em uma retentativa da requisi\xe7\xe3o. Caso o erro n\xe3o seja retent\xe1vel, o resultado da requisi\xe7\xe3o para o mesmo ",(0,o.kt)("inlineCode",{parentName:"p"},"x-Idempotency-Key")," ser\xe1 sempre o mesmo."),(0,o.kt)("p",null,"A tabela a seguir cont\xe9m uma classifica\xe7\xe3o dos tipos de erros n\xe3o retent\xe1veis."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Erro Type PicPay"),(0,o.kt)("th",{parentName:"tr",align:null},"Status Code"),(0,o.kt)("th",{parentName:"tr",align:null},"Message"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Duplicated_Transaction"),(0,o.kt)("td",{parentName:"tr",align:null},"(400) Bad Request"),(0,o.kt)("td",{parentName:"tr",align:null},"Duplicated transaction")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Funding_source_unavailable"),(0,o.kt)("td",{parentName:"tr",align:null},"(403) Forbidden"),(0,o.kt)("td",{parentName:"tr",align:null},"Funding source unavailable")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Insufficient_funds"),(0,o.kt)("td",{parentName:"tr",align:null},"(406) Not Acceptable"),(0,o.kt)("td",{parentName:"tr",align:null},"Insufficient funds")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Invalid_funding_source"),(0,o.kt)("td",{parentName:"tr",align:null},"(406) Not Acceptable"),(0,o.kt)("td",{parentName:"tr",align:null},"Invalid founding source")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Account_closed"),(0,o.kt)("td",{parentName:"tr",align:null},"(406) Not Acceptable"),(0,o.kt)("td",{parentName:"tr",align:null},"The account is closed")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Account_on_hold"),(0,o.kt)("td",{parentName:"tr",align:null},"(406) Not Acceptable"),(0,o.kt)("td",{parentName:"tr",align:null},"The account is on hold")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Invalid_Permission_refund"),(0,o.kt)("td",{parentName:"tr",align:null},"(406) Not Acceptable"),(0,o.kt)("td",{parentName:"tr",align:null},"Invalid Permission")))),(0,o.kt)("h2",{id:"pr\xf3ximos-passos"},"Pr\xf3ximos passos"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/one-click/guides/user-info"},"Consultando informa\xe7\xf5es dos usu\xe1rios"),";"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/one-click/guides/refund-payments"},"Solicitando um reembolso"),";")),(0,o.kt)("h2",{id:"obtendo-ajuda"},"Obtendo ajuda"),(0,o.kt)("p",null,"Esperamos ter ajudado com este artigo! Caso tenha restado alguma d\xfavida, voc\xea pode consultar o nosso FAQ ou entrar em contato atrav\xe9s do e-mail ",(0,o.kt)("a",{parentName:"p",href:"mailto:relacionamento-negocios@picpay.com"},"relacionamento-negocios@picpay.com"),"."))}d.isMDXComponent=!0}}]);